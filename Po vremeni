int pos; //переменная, хранящая положение сервопривода


//unsigned long Pause=(long)14160000;// Интервал высыпания корма 236 минут, т.е. 4 часа(без 4 минут), с учетом того, что время горения светодиода 4 минуты. Так же можно задать в следующем формате в мс(милисекунды) = 12ч*60мин*60сек*1000

//ДЛЯ ТЕСТА РАБОТЫ УСТРОЙСТВА ЗАКОМЕНТИРОВАТЬ ПРЕДЫДУЩИЕ ДВЕ СТРОЧКИ И СДЕЛАТЬ АКТИВНЫМИ СЛЕДУЮЩИЕ ДВЕ.
int Pause=5000;


int Y0=0; // начальное положение сервопривода. Люк закрыт
int Y1=90; // Откурытый люк
int t=100; // время, когда люк открыт. Контролирует кол-во высыпаемого корма
 void setup(){
 }
void loop()
{

  delay(100); //дадим отдышаться
  Open ();// Функция открытия люка
  Close ();//Функция закрытия люка 
  delay(Pause); //Отдыхаем до следующего приема пищи
} 


void Open() //функция открытия люка
{
  servo1.attach(servoPIN); // подкючаем сервопривод к цифровому выходу D9
  
  for(pos = Y0; pos < Y1; pos += 5) // шаг=угол поворота
  {
    servo1.write(pos);  // передвинься на следующую позицию
    delay(20);               // даем отдышаться
  }
     delay(20);               // небольшой перерыв  
}

void Close()
{
  for(pos = Y1; pos >= Y0; pos -= 15) //шаг=угол
  {                               
    servo1.write(pos);  // передвинься на следующую позицию
    delay(t);               // Пауза, пока насыпаемся корм
  }  
 
    delay(400); // пауза перед расслаблением
    servo1.detach(); //отключаем сервопривод
}
